<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Hostel Store</title>

<style>
body{margin:0;font-family:Arial;background:#f2f2f2;}
header{background:#111;color:white;text-align:center;padding:15px;font-size:22px;}
.container{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:15px;padding:15px;}
.card{background:white;padding:10px;border-radius:10px;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.card img{width:100%;height:140px;object-fit:cover;border-radius:8px;}
.price{font-weight:bold;margin:6px;}
.stock{font-size:14px;margin-bottom:5px;}
.in{color:green;} .out{color:red;}
.btn{background:#25D366;color:white;padding:8px 12px;border:none;border-radius:6px;cursor:pointer;margin-top:5px;}
input,select{padding:6px;margin:5px;}
</style>
</head>

<body>

<header>üõí My Hostel Store</header>

<h2 style="text-align:center">Customer Details</h2>
<div style="text-align:center;margin-bottom:20px;">
<input id="custName" placeholder="Your Name"><br>
<input id="roomNo" placeholder="Room Number"><br>
<select id="payment">
<option>UPI</option>
<option>Cash</option>
<option>Paytm</option>
</select><br>
<input id="utr" placeholder="UPI Ref No / Last 4 digits"><br>
  <select id="mode">
<option value="delivery">Room Delivery</option>
<option value="pickup">Self Pickup</option>
</select><br>

</div>

<div class="container">

<div class="card"><img src="maggi.jpg"><h3>Maggi</h3><div class="price">‚Çπ20</div><div class="stock">In Stock</div><input type="number" id="qty1" value="1" min="1"><br><button class="btn" onclick="addToCart('Maggi',20,'qty1')">Add</button></div>

<div class="card"><img src="kurkure.jpg"><h3>Kurkure</h3><div class="price">‚Çπ20</div><div class="stock">In Stock</div><input type="number" id="qty2" value="1" min="1"><br><button class="btn" onclick="addToCart('Kurkure',20,'qty2')">Add</button></div>

<div class="card"><img src="bhujia.jpg"><h3>Bhujia</h3><div class="price">‚Çπ300</div><div class="stock">In Stock</div><input type="number" id="qty3" value="1" min="1"><br><button class="btn" onclick="addToCart('Bhujia',300,'qty3')">Add</button></div>

<div class="card"><img src="ariel.jpg"><h3>Ariel</h3><div class="price">‚Çπ160</div><div class="stock">In Stock</div><input type="number" id="qty4" value="1" min="1"><br><button class="btn" onclick="addToCart('Ariel',160,'qty4')">Add</button></div>

</div>

<h2 style="text-align:center">üõí Your Cart</h2>
<div id="cart" style="text-align:center"></div>

<div style="text-align:center;margin:20px;">
<button class="btn" onclick="placeOrder()">Place Order on WhatsApp</button>
</div>

<div style="text-align:center;margin-top:30px;">
<button onclick="showAdmin()">Admin</button>
<div id="adminPanel" style="display:none;margin-top:10px;">
<button onclick="resetStock()">Reset Stock</button>
</div>
</div>

<script>

var orderCounter=localStorage.getItem("orderNo") || 1001;
var phone="919983729301";
var cart=[];

var stockData={Maggi:24,Kurkure:9,Bhujia:2,Ariel:1};

function updateStockDisplay(){
document.querySelectorAll(".card").forEach(card=>{
let name=card.querySelector("h3").innerText;
let stock=stockData[name];
card.querySelector(".stock").innerText="In Stock: "+stock;
});
}

function addToCart(name,price,qtyId){
let qty=parseInt(document.getElementById(qtyId).value);
if(qty<=0||isNaN(qty))return alert("Enter valid qty");
if(qty>stockData[name])return alert("Only "+stockData[name]+" left");
cart.push({name,price,qty});
showCart();
}

function showCart(){
let text="";let total=0;
cart.forEach((item,i)=>{
let sub=item.price*item.qty; total+=sub;
text+=`${item.name} √ó ${item.qty} = ‚Çπ${sub} <button onclick="removeItem(${i})">‚ùå</button><br>`;
});
text+="<br><b>Total: ‚Çπ"+total+"</b>";
document.getElementById("cart").innerHTML=text;
}

function removeItem(i){cart.splice(i,1);showCart();}

function getDeliveryCharge(){let h=new Date().getHours(); if(h>=15&&h<20)return 10; if(h>=20)return 20; return 0;}
function serviceOpen(){let h=new Date().getHours(); return !(h>=9&&h<15);}

function placeOrder(){

if(!serviceOpen())return alert("Service not available");
if(cart.length==0)return alert("Cart empty");

let orderTotal=cart.reduce((a,b)=>a+b.price*b.qty,0);
if(orderTotal<20)return alert("Minimum order ‚Çπ20 required");

orderCounter++; localStorage.setItem("orderNo",orderCounter);

let name=custName.value,
    room=roomNo.value,
    pay=payment.value,
    utr=document.getElementById("utr").value,
    mode=document.getElementById("mode").value;

if(!name||!room)return alert("Enter name & room");
if(pay!="Cash"&&!utr)return alert("Enter payment reference");

let msg=`üßæ HOSTEL STORE ORDER%0A%0AüÜî Order No: ${orderCounter}%0A%0Aüë§ Name: ${name}%0Aüè† Room: ${room}%0Aüí≥ Payment: ${pay}%0Aüì¶ Mode: ${mode}%0Aüî¢ Ref: ${utr}%0A%0Aüì¶ ITEMS%0A`;

let total=0;
cart.forEach(item=>{
let sub=item.price*item.qty; total+=sub;
msg+=`‚Ä¢ ${item.name} x${item.qty} = ‚Çπ${sub}%0A`;
stockData[item.name]-=item.qty;
});

let delivery = (mode==="pickup") ? 0 : getDeliveryCharge();
total+=delivery;

msg+=`%0Aüöö Delivery: ‚Çπ${delivery}%0A----------------------%0Aüí∞ TOTAL: ‚Çπ${total}%0A‚è∞ ${new Date().toLocaleTimeString()}`;

window.open(`https://wa.me/${phone}?text=${msg}`);

cart=[]; showCart(); updateStockDisplay();
custName.value=""; roomNo.value=""; utr.value="";
}

function showAdmin(){ if(prompt("Password")==="291") adminPanel.style.display="block"; }
function resetStock(){ stockData={Maggi:24,Kurkure:9,Bhujia:2,Ariel:1}; updateStockDisplay(); }

updateStockDisplay();

</script>
</body>
</html>





